<!-- VXUI Direct Module Template -->
<link rel="stylesheet" href="/css/vxui/direct.css">
<link rel="stylesheet" href="/css/vxui/filelist.css">
<link rel="stylesheet" href="/css/vxui/filelist-mobile-fix.css">
<link rel="stylesheet" href="/css/vxui/direct-mobile-fix.css">

<!-- Dynamic Sidebar Content -->
<template id="vx-direct-sidebar-tpl">
    <div class="vx-nav-section">
        <a href="javascript:;" class="vx-nav-item" id="vx-direct-nav-dashboard" onclick="VX_DIRECT.showTab('dashboard')">
            <iconpark-icon name="gauge-circle-bolt"></iconpark-icon>
            <span class="vx-nav-item-text" data-tpl="direct_nav_dashboard">仪表盘</span>
        </a>
        <a href="javascript:;" class="vx-nav-item" id="vx-direct-nav-files" onclick="VX_DIRECT.showTab('files')">
            <iconpark-icon name="file"></iconpark-icon>
            <span class="vx-nav-item-text" data-tpl="file">文件</span>
        </a>
        <a href="javascript:;" class="vx-nav-item" id="vx-direct-nav-folders" onclick="VX_DIRECT.showTab('folders')">
            <iconpark-icon name="folder-open-e1ad2j7l"></iconpark-icon>
            <span class="vx-nav-item-text" data-tpl="folder">文件夹</span>
        </a>
        <a href="javascript:;" class="vx-nav-item" id="vx-direct-nav-domain" onclick="VX_DIRECT.showTab('domain')">
            <iconpark-icon name="globe"></iconpark-icon>
            <span class="vx-nav-item-text" data-tpl="direct_nav_domain">域名设置</span>
        </a>
        <a href="javascript:;" class="vx-nav-item" id="vx-direct-nav-api" onclick="VX_DIRECT.showTab('api')">
            <iconpark-icon name="key"></iconpark-icon>
            <span class="vx-nav-item-text">API</span>
        </a>
    </div>
</template>

<!-- Header -->
<header class="vx-header vx-header-minimal">
    <div class="vx-header-left">
        <button class="vx-btn-icon vx-portrait-sidebar-btn" onclick="VXUI.toggleSidebar()" title="菜单">
            <iconpark-icon name="bars"></iconpark-icon>
        </button>
        <h1 class="vx-page-title">
            <iconpark-icon name="link"></iconpark-icon>
            <span data-tpl="nav_direct">直链</span>
        </h1>
    </div>

    <div class="vx-header-right">
        <div id="vx-direct-header-files-controls" style="display:none; align-items:center; gap: 8px; flex-wrap: wrap;">
            <select id="vx-direct-sort-by" class="vx-select" style="max-width: 160px;" onchange="VX_DIRECT.onSortChange()">
                <option value="0" data-tpl="sort_by_id">按时间</option>
                <option value="1" data-tpl="sort_by_name">按名称</option>
                <option value="2" data-tpl="sort_by_size">按大小</option>
            </select>
            <select id="vx-direct-sort-type" class="vx-select" style="max-width: 160px;" onchange="VX_DIRECT.onSortChange()">
                <option value="0" data-tpl="sort_desc">降序</option>
                <option value="1" data-tpl="sort_asc">升序</option>
            </select>
        </div>
        <button class="vx-btn vx-btn-ghost" onclick="VX_DIRECT.showHelp()" title="帮助">
            <iconpark-icon name="circle-info"></iconpark-icon>
            <span data-tpl="direct_what">什么是直链</span>
        </button>
    </div>
</header>

<!-- Content -->
<div class="vx-content" id="vx-direct-content">
    <!-- Loading State -->
    <div class="vx-loading" id="vx-direct-loading">
        <div class="vx-spinner vx-spinner-lg"></div>
        <span class="vx-loading-text" data-tpl="loading">加载中...</span>
    </div>

    <!-- Tabs -->
    <div id="vx-direct-panels" class="vx-hidden">
        <!-- Dashboard Tab -->
        <section id="vx-direct-panel-dashboard">
            <!-- Summary Card -->
            <div class="vx-card vx-mb-md">
                <div class="vx-card-body">
                    <div class="vx-flex vx-items-center vx-gap-md" style="gap: 16px;">
                        <div class="vx-avatar vx-avatar-xl" style="background: var(--vx-info-light);">
                            <iconpark-icon name="globe" style="font-size: 32px; color: var(--vx-info);"></iconpark-icon>
                        </div>
                        <div class="vx-flex-1" style="min-width: 0;">
                            <div class="vx-text-lg vx-font-semibold" style="display:flex; align-items:center; gap:10px;">
                                <span id="vx-direct-domain-text" data-tpl="direct_no_domain">未绑定域名</span>
                                <iconpark-icon id="vx-direct-domain-lock" name="lock-solid" style="display:none;"></iconpark-icon>
                            </div>
                            <div class="vx-flex vx-items-center vx-gap-md vx-mt-sm vx-text-muted" style="gap: 12px; flex-wrap: wrap;">
                                <span><iconpark-icon name="link"></iconpark-icon> <span id="vx-direct-count">0</span> <span data-tpl="direct_unit_links">个直链</span></span>
                                <span><iconpark-icon name="folder-open-e1ad2j7l"></iconpark-icon> <span id="vx-direct-folder-count">0</span> <span data-tpl="direct_unit_folders">个文件夹</span></span>
                                <span><iconpark-icon name="battery-three-quarters"></iconpark-icon> <span id="vx-direct-quota">0</span></span>
                                <span><iconpark-icon name="arrow-up-arrow-down"></iconpark-icon> <span id="vx-direct-total-transfer">0</span></span>
                                <span><iconpark-icon name="download"></iconpark-icon> <span id="vx-direct-total-downloads">0</span></span>
                            </div>
                            <div id="vx-direct-ready" class="vx-text-muted" style="margin-top: 10px; display:none;">
                                <span data-tpl="direct_service_ready">服务已就绪</span>
                            </div>
                            <div id="vx-direct-progress" style="margin-top: 10px; display:none;">
                                <div style="height: 6px; background: var(--vx-bg-secondary); border-radius: var(--vx-radius); overflow: hidden;">
                                    <div id="vx-direct-progress-bar" style="height: 6px; width: 0%; background: var(--vx-success);"></div>
                                </div>
                                <div class="vx-text-muted" style="margin-top: 6px; font-size: var(--vx-text-xs);" data-tpl="direct_processing">正在处理中…</div>
                            </div>
                        </div>
                        <div class="vx-flex" id="vx-direct-top-actions" style="display:flex; gap: 8px; align-items:center; flex-wrap: wrap; justify-content: flex-end;">
                            <button class="vx-btn vx-btn-ghost" id="vx-direct-top-brand" onclick="VX_DIRECT.openBrandSettings()" title="品牌设置">
                                <iconpark-icon name="setting-two"></iconpark-icon>
                                <span data-tpl="direct_brand">品牌</span>
                            </button>
                            <button class="vx-btn vx-btn-secondary" id="vx-direct-top-quota" onclick="VX_DIRECT.openQuotaPurchase()" title="购买直链配额">
                                <iconpark-icon name="battery-bolt"></iconpark-icon>
                                <span data-tpl="direct_buy_quota">购买配额</span>
                            </button>
                            <button class="vx-btn vx-btn-secondary" id="vx-direct-top-domain" onclick="VX_DIRECT.showTab('domain')" title="域名设置">
                                <iconpark-icon name="signal-stream"></iconpark-icon>
                                <span data-tpl="direct_nav_domain">域名设置</span>
                            </button>
                        </div>
                    </div>
                    <div id="vx-direct-notice-cname" class="vx-text-danger" style="margin-top: 12px; display:none;" data-tpl="direct_notice_cname">
                        域名解析似乎未正确指向，请检查 CNAME 记录。
                    </div>
                    <div id="vx-direct-notice-quota" class="vx-text-danger" style="margin-top: 8px; display:none;" data-tpl="direct_notice_quota">
                        剩余配额较低，建议及时补充。
                    </div>
                </div>
            </div>

            <div class="vx-card vx-mb-md" id="vx-direct-usage-card">
                <div class="vx-card-header">
                    <div class="vx-card-title" data-tpl="direct_traffic_stats">流量统计</div>
                </div>
                <div class="vx-card-body">
                    <div class="vx-text-muted" style="margin-bottom: 10px;" data-tpl="direct_traffic_desc">展示直链下载流量（按时间统计）。</div>
                    <div id="vx-direct-usage-chart" style="max-width: 100%;"></div>
                </div>
            </div>

            <div class="vx-card" id="vx-direct-brand-card" style="margin-top: 16px;">
                <div class="vx-card-header">
                    <div class="vx-card-title" data-tpl="direct_brand_settings">品牌设置</div>
                </div>
                <div class="vx-card-body">
                    <div class="vx-text-muted" style="margin-bottom: 12px;" data-tpl="direct_brand_desc">自定义直链页面的品牌信息（Logo / 标题 / 描述）。</div>

                    <div style="display:flex; gap: 12px; flex-wrap: wrap; align-items: flex-start;">
                        <div style="min-width: 220px;">
                            <div class="vx-text-sm" style="margin-bottom: 6px;" data-tpl="direct_current_logo">当前 Logo</div>
                            <div id="vx-direct-brand-logo-preview" style="width: 72px; height: 72px; border-radius: var(--vx-radius-md); background: var(--vx-bg-secondary); display:flex; align-items:center; justify-content:center; overflow:hidden;">
                                <iconpark-icon name="image" style="font-size: 28px; color: var(--vx-text-muted);"></iconpark-icon>
                            </div>
                            <div style="margin-top: 10px;">
                                <input id="vx-direct-brand-logo-input" type="file" accept="image/*" onchange="VX_DIRECT.brandLogoSet(this)" />
                            </div>
                            <div id="vx-direct-brand-logo-msg" class="vx-text-muted" style="margin-top: 8px; font-size: var(--vx-text-xs);"></div>
                        </div>

                        <div style="flex: 1; min-width: 260px;">
                            <label class="vx-text-sm" style="display:block; margin-bottom: 6px;" data-tpl="brand_title">品牌标题</label>
                            <input id="vx-direct-brand-title" class="vx-input" data-tpl="direct_brand_title_placeholder" placeholder="请输入品牌标题" />

                            <label class="vx-text-sm" style="display:block; margin: 12px 0 6px;" data-tpl="brand_content">品牌描述</label>
                            <textarea id="vx-direct-brand-content" class="vx-input" style="min-height: 110px; resize: vertical;" data-tpl="direct_brand_content_placeholder" placeholder="请输入品牌描述"></textarea>

                            <div style="margin-top: 12px; display:flex; gap: 8px; flex-wrap: wrap; align-items: center;">
                                <button class="vx-btn vx-btn-primary" onclick="VX_DIRECT.brandSet()">
                                    <iconpark-icon name="check"></iconpark-icon>
                                    <span data-tpl="brand_save">保存品牌</span>
                                </button>
                                <button class="vx-btn vx-btn-ghost" onclick="VX_DIRECT.brandReview()">
                                    <iconpark-icon name="share-from-square"></iconpark-icon>
                                    <span data-tpl="brand_submit">提交审核</span>
                                </button>
                                <span id="vx-direct-brand-save-status" class="vx-text-muted" style="font-size: var(--vx-text-xs);"></span>
                            </div>

                            <div style="margin-top: 12px;">
                                <span class="vx-text-sm" data-tpl="direct_current_status">当前状态：</span>
                                <span id="vx-direct-brand-status" class="vx-text-muted">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <!-- Files Tab -->
        <section id="vx-direct-panel-files" style="display:none;">
            <div id="vx-direct-files-empty" class="vx-empty" style="display:none;">
                <div class="vx-empty-icon"><iconpark-icon name="link"></iconpark-icon></div>
                <h3 class="vx-empty-title" data-tpl="direct_no_files">暂无直链文件</h3>
                <p class="vx-empty-text" data-tpl="direct_no_files_desc">可在文件列表中创建直链，然后在此处管理。</p>
                <button class="vx-btn vx-btn-primary" onclick="VXUI.navigate('filelist')">
                    <iconpark-icon name="folder-open-e1ad2j7l"></iconpark-icon>
                    <span data-tpl="nav_files">查看文件</span>
                </button>
            </div>

            <div class="vx-list-container" id="vx-direct-files-list" style="display:none;">
                <div class="vx-list-header">
                    <div class="vx-list-col vx-list-col-name" onclick="VX_DIRECT.setFileSort(1)" style="cursor: pointer;">
                        <div class="vx-list-checkbox" id="vx-direct-select-all" onclick="event.stopPropagation(); VX_DIRECT.toggleSelectAllFromHeader()" title="全选"></div>
                        <span data-tpl="filename">文件名</span>
                        <iconpark-icon name="sort-amount-down" class="vx-sort-icon" id="vx-direct-file-sort-icon-1"></iconpark-icon>
                    </div>
                    <div class="vx-list-col vx-list-col-size" onclick="VX_DIRECT.setFileSort(2)" style="cursor: pointer;">
                        <span data-tpl="filesize">大小</span>
                        <iconpark-icon name="sort-amount-down" class="vx-sort-icon" id="vx-direct-file-sort-icon-2"></iconpark-icon>
                    </div>
                    <div class="vx-list-col vx-list-col-date vx-hide-mobile" onclick="VX_DIRECT.setFileSort(0)" style="cursor: pointer;">
                        <span data-tpl="filedate">日期</span>
                        <iconpark-icon name="sort-amount-down" class="vx-sort-icon" id="vx-direct-file-sort-icon-0"></iconpark-icon>
                    </div>
                    <div class="vx-list-col vx-list-col-actions">
                        <span data-tpl="actions">操作</span>
                    </div>
                </div>
                <div class="vx-list-body" id="vx-direct-files-list-body"></div>
            </div>

            <!-- Selection Bar (filelist-style) -->
            <div class="vx-selection-bar" id="vx-direct-selection-bar" style="display: none;">
                <div class="vx-selection-info">
                    <span class="vx-selection-count">已选择 <strong id="vx-direct-selected-count">0</strong> 项</span>
                </div>
                <div class="vx-selection-actions">
                    <button class="vx-btn vx-btn-ghost" onclick="VX_DIRECT.copySelectedUrls()">
                        <iconpark-icon name="copy"></iconpark-icon>
                        <span>复制链接</span>
                    </button>
                    <button class="vx-btn vx-btn-ghost vx-text-danger" onclick="VX_DIRECT.deleteSelected()">
                        <iconpark-icon name="trash"></iconpark-icon>
                        <span data-tpl="on_select_delete">删除</span>
                    </button>
                    <button class="vx-btn vx-btn-ghost" onclick="VX_DIRECT.clearSelection()">
                        <span data-tpl="on_select_cancel">取消</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Folders Tab -->
        <section id="vx-direct-panel-folders" style="display:none;">
            <div id="vx-direct-folders-empty" class="vx-empty" style="display:none;">
                <div class="vx-empty-icon"><iconpark-icon name="folder-open-e1ad2j7l"></iconpark-icon></div>
                <h3 class="vx-empty-title" data-tpl="direct_no_folders">暂无直链文件夹</h3>
                <p class="vx-empty-text" data-tpl="direct_no_folders_desc">已开启直链的文件夹会出现在这里。</p>
            </div>

            <div class="vx-list-container" id="vx-direct-folders-list" style="display:none;">
                <div class="vx-list-header">
                    <div class="vx-list-col vx-list-col-name" onclick="VX_DIRECT.setFolderSort(1)" style="cursor: pointer;">
                        <div class="vx-list-checkbox" id="vx-direct-folder-select-all" onclick="event.stopPropagation(); VX_DIRECT.toggleFolderSelectAll()" title="全选"></div>
                        <span data-tpl="filename">文件名</span>
                        <iconpark-icon name="sort-amount-down" class="vx-sort-icon" id="vx-direct-folder-sort-icon-1"></iconpark-icon>
                    </div>
                    <div class="vx-list-col vx-list-col-size" onclick="VX_DIRECT.setFolderSort(2)" style="cursor: pointer;">
                        <span data-tpl="filesize">大小</span>
                        <iconpark-icon name="sort-amount-down" class="vx-sort-icon" id="vx-direct-folder-sort-icon-2"></iconpark-icon>
                    </div>
                    <div class="vx-list-col vx-list-col-date vx-hide-mobile" onclick="VX_DIRECT.setFolderSort(0)" style="cursor: pointer;">
                        <span data-tpl="filedate">日期</span>
                        <iconpark-icon name="sort-amount-down" class="vx-sort-icon" id="vx-direct-folder-sort-icon-0"></iconpark-icon>
                    </div>
                    <div class="vx-list-col vx-list-col-actions">
                        <span data-tpl="actions">操作</span>
                    </div>
                </div>
                <div class="vx-list-body" id="vx-direct-folders-list-body"></div>
            </div>

            <!-- Folder Selection Bar -->
            <div class="vx-selection-bar" id="vx-direct-folder-selection-bar" style="display: none;">
                <div class="vx-selection-info">
                    <span class="vx-selection-count">已选择 <strong id="vx-direct-folder-selected-count">0</strong> 项</span>
                </div>
                <div class="vx-selection-actions">
                    <button class="vx-btn vx-btn-ghost vx-text-danger" onclick="VX_DIRECT.deleteSelectedFolders()">
                        <iconpark-icon name="trash"></iconpark-icon>
                        <span data-tpl="on_select_delete">删除</span>
                    </button>
                    <button class="vx-btn vx-btn-ghost" onclick="VX_DIRECT.clearFolderSelection()">
                        <span data-tpl="on_select_cancel">取消</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- API Tab -->
        <section id="vx-direct-panel-api" class="vx-direct-api" style="display:none;">
            <div class="vx-card vx-mb-md">
                <div class="vx-card-body">
                    <div class="vx-api-key">
                        <div class="vx-api-key-main">
                            <div class="vx-text-lg vx-font-semibold">API Key</div>
                            <div class="vx-text-muted" style="margin-top: 4px;" data-tpl="direct_api_key_desc">用于 CLI / 接口访问</div>
                        </div>
                        <div class="vx-api-key-actions">
                            <span class="vx-badge vx-api-key-badge" style="background: var(--vx-primary-light); color: var(--vx-primary); padding: 6px 10px; border-radius: var(--vx-radius);">KEY</span>
                            <span id="vx-direct-api-key" class="vx-api-key-value">-</span>
                            <button class="vx-btn vx-btn-ghost" onclick="VX_DIRECT.copyAPIKey()" id="vx-direct-api-copy" data-tpl-title="copy">
                                <iconpark-icon name="copy"></iconpark-icon>
                                <span data-tpl="copy">复制</span>
                            </button>
                            <button class="vx-btn vx-btn-ghost vx-text-danger" onclick="VX_DIRECT.resetAPIKey()" id="vx-direct-api-reset" data-tpl-title="direct_api_reset">
                                <iconpark-icon name="rotate"></iconpark-icon>
                                <span data-tpl="direct_api_reset">重置</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="vx-card" style="margin-top: 16px;">
                <div class="vx-card-header">
                    <div class="vx-card-title" data-tpl="direct_api_docs_title">API 文档</div>
                </div>
                <div class="vx-card-body">
                    <!-- 文件上传 API -->
                    <div style="margin-bottom: 24px;">
                        <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: var(--vx-text);">
                            <iconpark-icon name="cloud-arrow-up"></iconpark-icon> 文件上传 API
                        </h3>
                        
                        <details class="vx-api-detail" style="padding: 10px 0;">
                            <summary class="vx-api-summary">
                                <iconpark-icon name="cloud-arrow-up"></iconpark-icon>
                                <span>上传文件</span>
                            </summary>
                            <div class="vx-text-sm" style="margin-top: 10px; line-height: 1.8;">
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">POST</span> <span class="vx-api-endpoint">https://tmp-cli.vx-cdn.com/app/upload_cli</span></div>
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">Content-Type</span> <span class="vx-api-endpoint">multipart/form-data</span></div>

                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_example">请求示例</div>
                                <div class="vx-code-block">
curl -F "file=@/root/test.bin" -F "key=YOUR_API_KEY" https://tmp-cli.vx-cdn.com/app/upload_cli
                                </div>

                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_params">参数说明</div>
                                <div class="vx-api-table-wrap">
                                    <table class="vx-api-table">
                                        <tbody>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; width: 180px; font-family: var(--vx-font-mono); color: var(--vx-primary);">key</td>
                                                <td style="padding: 10px;">API Key（必填）</td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">file</td>
                                                <td style="padding: 10px;">文件内容（必填）</td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">model</td>
                                                <td style="padding: 10px;">
                                                    <span data-tpl="direct_api_storage_mode">存储模式（可选）</span>
                                                    <div class="vx-text-muted" style="margin-top: 6px;">
                                                        <div><span style="font-family: var(--vx-font-mono);">99</span> - <span data-tpl="direct_api_permanent">永久</span></div>
                                                        <div><span style="font-family: var(--vx-font-mono);">0</span> - <span data-tpl="direct_api_24h">24小时</span></div>
                                                        <div><span style="font-family: var(--vx-font-mono);">1</span> - <span data-tpl="direct_api_3days">3天</span></div>
                                                        <div><span style="font-family: var(--vx-font-mono);">2</span> - <span data-tpl="direct_api_7days">7天</span></div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_return">返回值</div>
                                <div style="margin-top: 6px;">
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-success);">status: 1</span> - 成功，data 为文件 UKEY</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 0</span> - 无效请求</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 2</span> - 文件过大</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 3</span> - 服务器繁忙</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 4</span> - 空间不足</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 5</span> - 配额不足</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 6</span> - API Key 无效</div>
                                </div>
                            </div>
                        </details>
                    </div>

                    <!-- 直链管理 API -->
                    <div>
                        <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 12px; color: var(--vx-text);">
                            <iconpark-icon name="link"></iconpark-icon> 直链管理 API
                        </h3>

                        <details class="vx-api-detail" style="padding: 10px 0;">
                            <summary class="vx-api-summary">
                                <iconpark-icon name="battery-three-quarters"></iconpark-icon>
                                <span>查询配额</span>
                            </summary>
                            <div class="vx-text-sm" style="margin-top: 10px; line-height: 1.8;">
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">POST</span> <span class="vx-api-endpoint">https://tmp-api.vx-cdn.com/services/direct</span></div>
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">Content-Type</span> <span class="vx-api-endpoint">application/x-www-form-urlencoded</span></div>
                                <div style="margin-top: 8px; font-weight: 600;" data-tpl="direct_api_params">参数</div>
                                <div class="vx-api-table-wrap">
                                    <table class="vx-api-table">
                                        <tbody>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; width: 180px; font-family: var(--vx-font-mono); color: var(--vx-primary);">action</td>
                                                <td style="padding: 10px;"><span style="font-family: var(--vx-font-mono);">quota</span></td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">key</td>
                                                <td style="padding: 10px;">API Key</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_return">返回值</div>
                                <div>status：<span style="font-family: var(--vx-font-mono);">1</span> 成功 / <span style="font-family: var(--vx-font-mono);">0</span> 失败</div>
                                <div>data.quota：已购买配额（字节）</div>
                            </div>
                        </details>

                        <details class="vx-api-detail" style="padding: 10px 0;">
                            <summary class="vx-api-summary">
                                <iconpark-icon name="folder-open-e1ad2j7l"></iconpark-icon>
                                <span>获取仓库文件列表</span>
                            </summary>
                            <div class="vx-text-sm" style="margin-top: 10px; line-height: 1.8;">
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">POST</span> <span class="vx-api-endpoint">https://tmp-api.vx-cdn.com/services/direct</span></div>
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">Content-Type</span> <span class="vx-api-endpoint">application/x-www-form-urlencoded</span></div>
                                <div style="margin-top: 8px; font-weight: 600;" data-tpl="direct_api_params">参数</div>
                                <div class="vx-api-table-wrap">
                                    <table class="vx-api-table">
                                        <tbody>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; width: 180px; font-family: var(--vx-font-mono); color: var(--vx-primary);">action</td>
                                                <td style="padding: 10px;"><span style="font-family: var(--vx-font-mono);">list_of_workspace</span></td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">key</td>
                                                <td style="padding: 10px;">API Key</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">page</td>
                                                <td style="padding: 10px;">页码（可选）</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_return">返回值</div>
                                <div>status：<span style="font-family: var(--vx-font-mono);">1</span> 成功 / <span style="font-family: var(--vx-font-mono);">0</span> 失败</div>
                                <div>data[]：文件数组，包含 <span style="font-family: var(--vx-font-mono);">ukey</span>、<span style="font-family: var(--vx-font-mono);">name</span>、<span style="font-family: var(--vx-font-mono);">size</span></div>
                            </div>
                        </details>

                        <details class="vx-api-detail" style="padding: 10px 0;">
                            <summary class="vx-api-summary">
                                <iconpark-icon name="list"></iconpark-icon>
                                <span>获取直链列表</span>
                            </summary>
                            <div class="vx-text-sm" style="margin-top: 10px; line-height: 1.8;">
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">POST</span> <span class="vx-api-endpoint">https://tmp-api.vx-cdn.com/services/direct</span></div>
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">Content-Type</span> <span class="vx-api-endpoint">application/x-www-form-urlencoded</span></div>
                                <div style="margin-top: 8px; font-weight: 600;" data-tpl="direct_api_params">参数</div>
                                <div class="vx-api-table-wrap">
                                    <table class="vx-api-table">
                                        <tbody>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; width: 180px; font-family: var(--vx-font-mono); color: var(--vx-primary);">action</td>
                                                <td style="padding: 10px;"><span style="font-family: var(--vx-font-mono);">list_of_direct</span></td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">key</td>
                                                <td style="padding: 10px;">API Key</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">page</td>
                                                <td style="padding: 10px;">页码（可选）</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_return">返回值</div>
                                <div>status：<span style="font-family: var(--vx-font-mono);">1</span> 成功 / <span style="font-family: var(--vx-font-mono);">0</span> 失败</div>
                                <div>data[]：直链数组，包含 <span style="font-family: var(--vx-font-mono);">dkey</span>、<span style="font-family: var(--vx-font-mono);">link</span>、<span style="font-family: var(--vx-font-mono);">name</span>、<span style="font-family: var(--vx-font-mono);">size</span>、<span style="font-family: var(--vx-font-mono);">etime</span></div>
                            </div>
                        </details>

                        <details class="vx-api-detail" style="padding: 10px 0;">
                            <summary class="vx-api-summary">
                                <iconpark-icon name="circle-plus"></iconpark-icon>
                                <span>创建直链</span>
                            </summary>
                            <div class="vx-text-sm" style="margin-top: 10px; line-height: 1.8;">
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">POST</span> <span class="vx-api-endpoint">https://tmp-api.vx-cdn.com/services/direct</span></div>
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">Content-Type</span> <span class="vx-api-endpoint">application/x-www-form-urlencoded</span></div>
                                <div style="margin-top: 8px; font-weight: 600;" data-tpl="direct_api_params">参数</div>
                                <div class="vx-api-table-wrap">
                                    <table class="vx-api-table">
                                        <tbody>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; width: 180px; font-family: var(--vx-font-mono); color: var(--vx-primary);">action</td>
                                                <td style="padding: 10px;"><span style="font-family: var(--vx-font-mono);">link_add</span></td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">key</td>
                                                <td style="padding: 10px;">API Key</td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">ukey</td>
                                                <td style="padding: 10px;">文件 UKEY</td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">valid_time</td>
                                                <td style="padding: 10px;">有效期（分钟，可选）</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">download_limit</td>
                                                <td style="padding: 10px;">下载次数限制（可选）</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_return">返回值</div>
                                <div style="margin-top: 6px;">
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-success);">status: 1</span> - 成功</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 0</span> - 失败</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 1001</span> - 文件不存在</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 1002</span> - 内部错误</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 1005</span> - 文件未就绪</div>
                                </div>
                            </div>
                        </details>

                        <details class="vx-api-detail" style="padding: 10px 0;">
                            <summary class="vx-api-summary">
                                <iconpark-icon name="trash"></iconpark-icon>
                                <span>删除直链</span>
                            </summary>
                            <div class="vx-text-sm" style="margin-top: 10px; line-height: 1.8;">
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">POST</span> <span class="vx-api-endpoint">https://tmp-api.vx-cdn.com/services/direct</span></div>
                                <div style="margin-bottom: 8px;"><span class="vx-api-method">Content-Type</span> <span class="vx-api-endpoint">application/x-www-form-urlencoded</span></div>
                                <div style="margin-top: 8px; font-weight: 600;" data-tpl="direct_api_params">参数</div>
                                <div class="vx-api-table-wrap">
                                    <table class="vx-api-table">
                                        <tbody>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; width: 180px; font-family: var(--vx-font-mono); color: var(--vx-primary);">action</td>
                                                <td style="padding: 10px;"><span style="font-family: var(--vx-font-mono);">link_del</span></td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">key</td>
                                                <td style="padding: 10px;">API Key</td>
                                            </tr>
                                            <tr style="border-bottom: 1px solid var(--vx-border);">
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">dkey</td>
                                                <td style="padding: 10px;">直链 DKEY</td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 10px; font-family: var(--vx-font-mono); color: var(--vx-primary);">delete</td>
                                                <td style="padding: 10px;">是否同时删除文件（可选）</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="margin-top: 12px; font-weight: 600;" data-tpl="direct_api_return">返回值</div>
                                <div style="margin-top: 6px;">
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-success);">status: 1</span> - 成功</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 0</span> - 失败</div>
                                    <div><span style="font-family: var(--vx-font-mono); color: var(--vx-danger);">status: 1003</span> - 直链不存在</div>
                                </div>
                            </div>
                        </details>
                    </div>
                </div>
            </div>
        </section>

        <!-- Domain Tab -->
        <section id="vx-direct-panel-domain" style="display:none;">
            <div class="vx-card">
                <div class="vx-card-header">
                    <div class="vx-card-title" data-tpl="direct_domain_bind_title">绑定域名</div>
                </div>
                <div class="vx-card-body">
                    <div class="vx-text-muted" style="margin-bottom: 12px;" data-tpl="direct_domain_bind_desc">绑定后可使用自定义域名访问直链资源。</div>

                    <div style="display:flex; gap: 12px; flex-wrap: wrap; align-items: flex-start;">
                        <div style="flex: 1; min-width: 260px;">
                            <label class="vx-text-sm" style="display:block; margin-bottom: 6px;" data-tpl="direct_domain_label">域名</label>
                            <input id="vx-direct-domain-input" class="vx-input" data-tpl-placeholder="direct_domain_placeholder" placeholder="请输入您的域名" oninput="VX_DIRECT.onDomainInput()" />
                            <!-- 域名格式错误提示 -->
                            <div id="vx-direct-domain-error" class="vx-text-danger" style="margin-top: 8px; font-size: var(--vx-text-xs); display:none;"></div>
                            <!-- ACME DNS 提示（启用 HTTPS 时显示） -->
                            <div id="vx-direct-domain-acme-hint" class="vx-text-muted" style="margin-top: 8px; font-size: var(--vx-text-xs); display:none;">
                                <span data-tpl="direct_ssl_check_input_notice2">请为域名添加 CNAME 记录：</span><br>
                                <span id="vx-direct-acme-domain" class="vx-text-success">_acme-challenge.example.com</span>
                                <span> → </span>
                                <span class="vx-text-danger">_acme-challenge.ng-ccc.com</span>
                            </div>
                            <!-- CNAME 提示（普通域名绑定） -->
                            <div id="vx-direct-domain-cname-hint" class="vx-text-muted" style="margin-top: 8px; font-size: var(--vx-text-xs); display:none;">
                                <span data-tpl="direct_ssl_check_input_notice2">请为域名添加 CNAME 记录：</span><br>
                                <span id="vx-direct-cname-domain" class="vx-text-success">example.com</span>
                                <span> → </span>
                                <span class="vx-text-danger">cdn.5t-cdn.com</span>
                                <div style="margin-top: 8px; cursor: pointer; color: var(--vx-warning);" onclick="VX_DIRECT.showCloudflareNotice()">
                                    <iconpark-icon name="circle-exclamation"></iconpark-icon>
                                    <span data-tpl="direct_cf_notice">如果您的域名由 Cloudflare 管理，请使用二级域名。</span>
                                </div>
                            </div>
                        </div>

                        <div style="flex: 1; min-width: 260px;" id="vx-direct-ssl-box">
                            <label class="vx-text-sm" style="display:block; margin-bottom: 6px;" data-tpl="direct_ssl_enable_label">启用 HTTPS</label>
                            <label class="vx-radio" style="margin-right: 16px;"><input type="radio" name="vx-direct-ssl" value="yes" onchange="VX_DIRECT.onDomainInput()"> <span data-tpl="btn_enable">启用</span></label>
                            <label class="vx-radio"><input type="radio" name="vx-direct-ssl" value="no" checked onchange="VX_DIRECT.onDomainInput()"> <span data-tpl="direct_ssl_disable">关闭</span></label>
                            <div class="vx-text-muted" style="margin-top: 8px; font-size: var(--vx-text-xs);" data-tpl="direct_ssl_auto_cert_desc">启用后将自动申请证书（需按提示配置 DNS）。</div>

                            <div style="margin-top: 14px; display:flex; gap: 8px; flex-wrap: wrap;">
                                <button class="vx-btn vx-btn-primary" onclick="VX_DIRECT.saveDomain()">
                                    <iconpark-icon name="check"></iconpark-icon>
                                    <span data-tpl="btn_save_settings">保存设置</span>
                                </button>
                                <button class="vx-btn vx-btn-danger" id="vx-direct-disable-ssl" onclick="VX_DIRECT.disableSSL()" style="display:none;">
                                    <iconpark-icon name="circle-xmark"></iconpark-icon>
                                    <span data-tpl="direct_ssl_disable_btn">停用 HTTPS</span>
                                </button>
                            </div>

                            <div id="vx-direct-traffic-block" style="margin-top: 16px;">
                                <label class="vx-text-sm" style="display:block; margin-bottom: 6px;" data-tpl="direct_traffic_limit_label">单 IP 日流量限制（可选）</label>
                                <div style="display:flex; gap: 8px;">
                                    <input id="vx-direct-traffic-limit" class="vx-input" style="max-width: 180px;" data-tpl-placeholder="direct_traffic_limit_placeholder" placeholder="0 表示不限" />
                                    <button class="vx-btn vx-btn-secondary" onclick="VX_DIRECT.saveTrafficLimit()" data-tpl="btn_save">保存</button>
                                </div>
                                <div class="vx-text-muted" style="margin-top: 8px; font-size: var(--vx-text-xs);" data-tpl="direct_traffic_limit_desc">用于限制单个 IP 每日下载流量。</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </div>
</div>
