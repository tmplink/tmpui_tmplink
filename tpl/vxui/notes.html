<!-- VXUI Notes Module Template -->

<!-- Header -->
<header class="vx-header">
    <div class="vx-header-left">
        <button class="vx-btn-icon" onclick="VXUI.toggleSidebar()">
            <iconpark-icon name="bars"></iconpark-icon>
        </button>
        
        <h1 class="vx-text-xl vx-font-semibold" data-tpl="nav_notes">密记</h1>
    </div>
    
    <div class="vx-header-right">
        <button class="vx-btn vx-btn-primary" onclick="VX_NOTES.createNote()">
            <iconpark-icon name="circle-plus"></iconpark-icon>
            <span data-tpl="notes_new">新建密记</span>
        </button>
        <button class="vx-btn-icon" onclick="VX_NOTES.refresh()" data-vx-tooltip="刷新">
            <iconpark-icon name="rotate"></iconpark-icon>
        </button>
    </div>
</header>

<!-- Content -->
<div class="vx-content vx-p-0">
    <div class="vx-notes-layout">
        <!-- Notes List Sidebar -->
        <div class="vx-notes-sidebar">
            <!-- Search -->
            <div class="vx-notes-search">
                <div class="vx-search vx-w-full">
                    <iconpark-icon name="search" class="vx-search-icon"></iconpark-icon>
                    <input type="text" class="vx-search-input" 
                        placeholder="搜索密记..." 
                        onkeyup="VX_NOTES.search(this.value)">
                </div>
            </div>
            
            <!-- Loading State -->
            <div class="vx-loading" id="vx-notes-loading">
                <div class="vx-spinner"></div>
                <span class="vx-loading-text" data-tpl="loading">加载中...</span>
            </div>
            
            <!-- Notes List -->
            <div id="vx-notes-content" class="vx-hidden">
                <div class="vx-notes-list" id="vx-notes-list">
                    <!-- Items will be rendered here -->
                </div>
            </div>
            
            <!-- Empty State -->
            <div class="vx-empty vx-hidden" id="vx-notes-empty" style="padding: 40px 20px;">
                <div class="vx-empty-icon" style="width: 60px; height: 60px;">
                    <iconpark-icon name="memo-pad" style="font-size: 30px;"></iconpark-icon>
                </div>
                <h3 class="vx-empty-title vx-text-lg">暂无密记</h3>
                <p class="vx-empty-text">点击上方按钮创建第一条密记</p>
            </div>
            
            <!-- Stats -->
            <div class="vx-notes-stats">
                <span id="vx-notes-count">0</span> 条密记
            </div>
        </div>
        
        <!-- Editor Area -->
        <div class="vx-notes-main">
            <!-- Placeholder -->
            <div class="vx-notes-placeholder" id="vx-notes-placeholder">
                <div class="vx-empty">
                    <div class="vx-empty-icon">
                        <iconpark-icon name="memo-pad"></iconpark-icon>
                    </div>
                    <h3 class="vx-empty-title">选择或创建密记</h3>
                    <p class="vx-empty-text">从左侧列表选择一条密记，或创建新的密记</p>
                    <button class="vx-btn vx-btn-primary" onclick="VX_NOTES.createNote()">
                        <iconpark-icon name="circle-plus"></iconpark-icon>
                        <span data-tpl="notes_new">新建密记</span>
                    </button>
                </div>
            </div>
            
            <!-- Editor -->
            <div class="vx-notes-editor vx-hidden" id="vx-notes-editor">
                <div class="vx-notes-editor-header">
                    <input type="text" class="vx-notes-title-input" id="vx-notes-title"
                        placeholder="输入标题..."
                        onchange="VX_NOTES.onContentChange()">
                    <div class="vx-notes-editor-actions">
                        <button class="vx-btn vx-btn-primary vx-btn-sm" onclick="VX_NOTES.saveNote()">
                            <iconpark-icon name="check"></iconpark-icon>
                            <span>保存</span>
                        </button>
                        <button class="vx-btn vx-btn-ghost vx-btn-sm" onclick="VX_NOTES.hideEditor()">
                            <iconpark-icon name="circle-xmark"></iconpark-icon>
                        </button>
                    </div>
                </div>
                <div class="vx-notes-content-editor" id="vx-notes-content-editor"
                    contenteditable="true"
                    placeholder="开始输入内容..."
                    oninput="VX_NOTES.onContentChange()">
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Notes Module Specific Styles */
.vx-notes-layout {
    display: flex;
    height: calc(100vh - var(--vx-header-height));
}

.vx-notes-sidebar {
    width: 320px;
    border-right: 1px solid var(--vx-border);
    display: flex;
    flex-direction: column;
    background: var(--vx-surface);
    flex-shrink: 0;
}

.vx-notes-search {
    padding: 16px;
    border-bottom: 1px solid var(--vx-border);
}

.vx-notes-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.vx-notes-item {
    position: relative;
    padding: 12px 16px;
    border-radius: var(--vx-radius);
    cursor: pointer;
    transition: var(--vx-transition-fast);
    margin-bottom: 4px;
}

.vx-notes-item:hover {
    background: var(--vx-surface-hover);
}

.vx-notes-item.active {
    background: var(--vx-primary-light);
}

.vx-notes-item-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 4px;
}

.vx-notes-item-title {
    font-size: var(--vx-text-sm);
    font-weight: 500;
    color: var(--vx-text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
}

.vx-notes-item-time {
    font-size: var(--vx-text-xs);
    color: var(--vx-text-muted);
    flex-shrink: 0;
    margin-left: 8px;
}

.vx-notes-item-preview {
    font-size: var(--vx-text-xs);
    color: var(--vx-text-secondary);
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.5;
}

.vx-notes-item-actions {
    position: absolute;
    top: 8px;
    right: 8px;
    opacity: 0;
    transition: var(--vx-transition-fast);
}

.vx-notes-item:hover .vx-notes-item-actions {
    opacity: 1;
}

.vx-notes-item-actions .vx-btn-icon {
    width: 28px;
    height: 28px;
    color: var(--vx-text-muted);
}

.vx-notes-item-actions .vx-btn-icon:hover {
    color: var(--vx-danger);
    background: var(--vx-danger-light);
}

.vx-notes-stats {
    padding: 12px 16px;
    border-top: 1px solid var(--vx-border);
    font-size: var(--vx-text-xs);
    color: var(--vx-text-muted);
    text-align: center;
}

/* Editor Area */
.vx-notes-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--vx-bg);
    overflow: hidden;
}

.vx-notes-placeholder {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}

.vx-notes-editor {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.vx-notes-editor-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 24px;
    border-bottom: 1px solid var(--vx-border);
    background: var(--vx-surface);
}

.vx-notes-title-input {
    flex: 1;
    border: none;
    background: transparent;
    font-size: var(--vx-text-2xl);
    font-weight: 600;
    color: var(--vx-text);
    outline: none;
}

.vx-notes-title-input::placeholder {
    color: var(--vx-text-muted);
}

.vx-notes-editor-actions {
    display: flex;
    gap: 8px;
    flex-shrink: 0;
}

.vx-notes-content-editor {
    flex: 1;
    padding: 24px;
    font-size: var(--vx-text-base);
    line-height: 1.8;
    color: var(--vx-text);
    outline: none;
    overflow-y: auto;
}

.vx-notes-content-editor:empty:before {
    content: attr(placeholder);
    color: var(--vx-text-muted);
}

/* Responsive */
@media (max-width: 768px) {
    .vx-notes-layout {
        flex-direction: column;
        height: calc(100vh - 56px - var(--vx-mobile-bar-height));
    }
    
    .vx-notes-sidebar {
        width: 100%;
        height: 50%;
        border-right: none;
        border-bottom: 1px solid var(--vx-border);
    }
    
    .vx-notes-main {
        height: 50%;
    }
    
    .vx-notes-editor-header {
        padding: 12px 16px;
    }
    
    .vx-notes-title-input {
        font-size: var(--vx-text-lg);
    }
    
    .vx-notes-content-editor {
        padding: 16px;
    }
}
</style>
