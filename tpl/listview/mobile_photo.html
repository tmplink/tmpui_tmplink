<!-- Photo Album Module - Mobile Template -->
<div class="photo-album-container">
    <div class="album-layout">
        <!-- Mobile Sidebar (Hidden by default) -->
        <aside class="album-sidebar">
            <div class="album-sidebar-header">
                <a href="javascript:;" class="album-back-btn" onclick="PHOTO.toggleSidebar()">
                    <iconpark-icon name="x-square"></iconpark-icon>
                    <span>关闭</span>
                </a>
                <div class="album-folder-info">
                    <h1 class="album-folder-name" id="album-folder-name-m">相册</h1>
                    <div class="album-folder-meta">
                        <span class="album-folder-meta-item">
                            <iconpark-icon name="images"></iconpark-icon>
                            <span id="album-photo-count-m">0</span> 张照片
                        </span>
                    </div>
                </div>
            </div>
            
            <nav class="album-sidebar-nav">
                <div class="album-nav-section">
                    <div class="album-nav-title">视图</div>
                    <div class="album-nav-item active" onclick="PHOTO.setGridSize('normal'); PHOTO.toggleSidebar();" id="nav-normal-m">
                        <iconpark-icon name="list-radio"></iconpark-icon>
                        <span>标准网格</span>
                    </div>
                    <div class="album-nav-item" onclick="PHOTO.setGridSize('large'); PHOTO.toggleSidebar();" id="nav-large-m">
                        <iconpark-icon name="images"></iconpark-icon>
                        <span>大图模式</span>
                    </div>
                    <div class="album-nav-item" onclick="PHOTO.setGridSize('small'); PHOTO.toggleSidebar();" id="nav-small-m">
                        <iconpark-icon name="list"></iconpark-icon>
                        <span>紧凑模式</span>
                    </div>
                </div>
            </nav>
            
            <div class="album-sidebar-actions">
                <button class="album-action-btn primary" onclick="PHOTO.downloadSelected(); PHOTO.toggleSidebar();">
                    <iconpark-icon name="cloud-arrow-down"></iconpark-icon>
                    <span data-tpl="album_download_selected">下载选中</span>
                </button>
                <button class="album-action-btn secondary" onclick="PHOTO.goBack(); PHOTO.toggleSidebar();">
                    <iconpark-icon name="left-c"></iconpark-icon>
                    <span data-tpl="album_back">返回</span>
                </button>
                <button class="album-action-btn tertiary" onclick="PHOTO.exitPhotoMode();">
                    <iconpark-icon name="folder-open"></iconpark-icon>
                    <span data-tpl="album_exit">退出相册</span>
                </button>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="album-main">
            <!-- Mobile Header -->
            <div class="album-mobile-header" style="display: flex;">
                <button class="album-icon-btn" id="mobile-back-btn" onclick="PHOTO.goBack()">
                    <iconpark-icon name="left-c"></iconpark-icon>
                </button>
                <span class="album-mobile-title" id="album-mobile-title">相册</span>
                <button class="album-icon-btn" onclick="PHOTO.toggleSidebar()">
                    <iconpark-icon name="ellipsis"></iconpark-icon>
                </button>
            </div>
            
            <!-- Content Area -->
            <div class="album-content">
                <div class="album-grid" id="album-grid">
                    <!-- Photos will be inserted here -->
                </div>
                
                <!-- Loading State -->
                <div class="album-loading" id="album-loading" style="display: none;">
                    <div class="album-spinner"></div>
                    <span class="album-loading-text">正在加载...</span>
                </div>
                
                <!-- Empty State -->
                <div class="album-empty" id="album-empty" style="display: none;">
                    <div class="album-empty-icon">
                        <iconpark-icon name="images"></iconpark-icon>
                    </div>
                    <h3 class="album-empty-title">暂无照片</h3>
                    <p class="album-empty-text">此文件夹中没有图片文件</p>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Selection Bar -->
    <div class="album-selection-bar" id="album-selection-bar">
        <span class="selection-count">
            <span id="selection-count-num">0</span> 项已选择
        </span>
        <div class="selection-actions">
            <button class="album-icon-btn" onclick="PHOTO.downloadSelected()" title="下载">
                <iconpark-icon name="cloud-arrow-down"></iconpark-icon>
            </button>
            <button class="album-icon-btn" onclick="PHOTO.selectAll()" title="全选">
                <iconpark-icon name="check-square"></iconpark-icon>
            </button>
            <button class="album-icon-btn danger" onclick="PHOTO.cancelSelection()" title="取消">
                <iconpark-icon name="x-square"></iconpark-icon>
            </button>
        </div>
    </div>
    
    <!-- Mobile Bottom Bar -->
    <div class="album-mobile-bar" style="display: flex;">
        <button class="album-mobile-btn active" onclick="PHOTO.setGridSize('normal')">
            <iconpark-icon name="list-radio"></iconpark-icon>
            <span>标准</span>
        </button>
        <button class="album-mobile-btn" onclick="PHOTO.toggleSelectMode()">
            <iconpark-icon name="check-square"></iconpark-icon>
            <span>选择</span>
        </button>
        <button class="album-mobile-btn" onclick="PHOTO.downloadSelected()">
            <iconpark-icon name="cloud-arrow-down"></iconpark-icon>
            <span>下载</span>
        </button>
        <button class="album-mobile-btn" onclick="PHOTO.refresh()">
            <iconpark-icon name="rotate"></iconpark-icon>
            <span>刷新</span>
        </button>
    </div>
    
    <!-- Lightbox -->
    <div class="album-lightbox" id="album-lightbox">
        <header class="lightbox-header">
            <h2 class="lightbox-title" id="lightbox-title"></h2>
            <div class="lightbox-actions">
                <button class="lightbox-action" onclick="PHOTO.downloadCurrent()" title="下载">
                    <iconpark-icon name="cloud-arrow-down"></iconpark-icon>
                </button>
                <button class="lightbox-action" onclick="PHOTO.closeLightbox()" title="关闭">
                    <iconpark-icon name="x-square"></iconpark-icon>
                </button>
            </div>
        </header>
        
        <div class="lightbox-content">
            <img class="lightbox-image" id="lightbox-image" src="" alt="">
        </div>
        
        <button class="lightbox-nav prev" onclick="PHOTO.lightboxPrev()">
            <iconpark-icon name="left-c"></iconpark-icon>
        </button>
        <button class="lightbox-nav next" onclick="PHOTO.lightboxNext()">
            <iconpark-icon name="left-c" style="transform: rotate(180deg)"></iconpark-icon>
        </button>
        
        <footer class="lightbox-footer">
            <span class="lightbox-counter" id="lightbox-counter">1 / 10</span>
        </footer>
    </div>
</div>

<!-- Photo Card Template -->
<script type="text/template" id="tpl-photo-card">
    <div class="photo-card" data-index="{index}" data-fid="{fid}" onclick="PHOTO.cardClick(event, {index})">
        <img class="photo-card-image" src="{thumbnail}" alt="{name}" loading="lazy">
        <div class="photo-card-overlay">
            <div class="photo-card-info">
                <p class="photo-card-name">{name}</p>
                <div class="photo-card-meta">
                    <span>{size}</span>
                </div>
            </div>
        </div>
        <div class="photo-card-actions">
            <button class="photo-card-action" onclick="event.stopPropagation(); PHOTO.downloadPhoto({index})" title="下载">
                <iconpark-icon name="cloud-arrow-down"></iconpark-icon>
            </button>
        </div>
        <div class="photo-card-select" onclick="event.stopPropagation(); PHOTO.toggleSelect({index})">
            <iconpark-icon name="check"></iconpark-icon>
        </div>
    </div>
</script>

<!-- Folder Card Template -->
<script type="text/template" id="tpl-folder-card">
    <div class="album-folder-card" data-mrid="{mrid}" onclick="PHOTO.openFolder('{mrid}')">
        <iconpark-icon name="folder-open"></iconpark-icon>
        <span class="album-folder-card-name">{name}</span>
        <span class="album-folder-card-count">{count} 项</span>
    </div>
</script>

<!-- Lightbox Thumbnail Template -->
<script type="text/template" id="tpl-lightbox-thumb">
    <div class="lightbox-thumbnail {active}" data-index="{index}" onclick="PHOTO.goToPhoto({index})">
        <img src="{thumbnail}" alt="">
    </div>
</script>
