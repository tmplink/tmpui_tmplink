/* Modern Authentication Styles for Desktop */

/* Only apply desktop styles for screens wider than 768px */
@media (min-width: 768px) {
    
    /* Enhanced container for modern look */
    .container.d-flex.flex-grow-1.vh-100 {
        background: transparent !important;
        position: relative;
        overflow: hidden !important;
        height: calc(100vh - 60px) !important;
        padding: 20px !important;
        box-sizing: border-box !important;
        align-items: center !important;
        justify-content: center !important;
    }
    
    /* Modern form container - treat logo + card as one unit */
    .form-sp {
        position: relative !important;
        z-index: 2 !important;
        width: 100% !important;
        max-width: 420px !important;
        padding: 0 !important;
        margin: 0 !important;
        box-sizing: border-box !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        max-height: 100% !important;
    }
    
    /* Enhanced logo container */
    .form-sp .text-center.mb-6 {
        margin-bottom: 1.5rem !important;
        padding: 0 !important;
        background: transparent !important;
        border-radius: 0 !important;
        width: auto !important;
        height: auto !important;
        display: block !important;
        text-align: center !important;
        border: none !important;
        flex-shrink: 0 !important;
    }
    
    
    .form-sp .text-center.mb-6 img {
        width: 48px !important;
        height: 48px !important;
        filter: none !important;
    }
    
    /* Modern card styling */
    .form-sp .card {
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(20px) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        border-radius: 20px !important;
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.1),
            0 0 0 1px rgba(255, 255, 255, 0.05) !important;
        padding: 2rem !important;
        margin: 0 !important;
        box-sizing: border-box !important;
        width: 100% !important;
        flex-shrink: 1 !important;
        min-height: 0 !important;
        overflow-y: auto !important;
    }
    
    
    /* Enhanced form controls */
    .form-sp .form-control {
        height: 50px !important;
        border-radius: 12px !important;
        border: 2px solid #e8ecf4 !important;
        background: #f8f9fb !important;
        font-size: 16px !important;
        padding: 12px 16px !important;
        box-shadow: none !important;
        color: #333 !important;
    }
    
    .form-sp .form-control:focus {
        border-color: #667eea !important;
        background: #ffffff !important;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15) !important;
        outline: none !important;
    }
    
    /* Override form-sp positioning for modern look */
    .form-sp .form-sp-top {
        margin-bottom: 1rem !important;
        border-radius: 12px !important;
        border-bottom-left-radius: 12px !important;
        border-bottom-right-radius: 12px !important;
    }
    
    .form-sp .form-sp-mid {
        margin-bottom: 1rem !important;
        border-radius: 12px !important;
        border-top-left-radius: 12px !important;
        border-top-right-radius: 12px !important;
        border-bottom-left-radius: 12px !important;
        border-bottom-right-radius: 12px !important;
    }
    
    .form-sp .form-sp-bottom {
        margin-bottom: 1rem !important;
        border-radius: 12px !important;
        border-top-left-radius: 12px !important;
        border-top-right-radius: 12px !important;
    }
    
    /* Enhanced input group for verification code */
    .form-sp .input-group .form-control {
        border-top-right-radius: 0 !important;
        border-bottom-right-radius: 0 !important;
        border-right: none !important;
    }
    
    .form-sp .input-group .btn {
        border-radius: 0 12px 12px 0 !important;
        border: 2px solid #667eea !important;
        background: #667eea !important;
        color: white !important;
        font-weight: 600 !important;
        height: 50px !important;
        border-left: none !important;
    }
    
    .form-sp .input-group .btn:hover {
        background: #5a6fd8 !important;
    }
    
    /* Modern primary button */
    .form-sp .btn-primary {
        height: 50px !important;
        border-radius: 12px !important;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
        border: none !important;
        font-weight: 600 !important;
        font-size: 16px !important;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3) !important;
        color: white !important;
    }
    
    .form-sp .btn-primary:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%) !important;
    }
    
    /* Modern light button (Google login, registration) */
    .form-sp .btn-light {
        height: 50px !important;
        border-radius: 12px !important;
        background: #ffffff !important;
        border: 2px solid #e8ecf4 !important;
        font-weight: 600 !important;
        color: #333 !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05) !important;
    }
    
    .form-sp .btn-light:hover {
        background: #f8f9fb !important;
        border-color: #667eea !important;
        color: #667eea !important;
    }
    
    /* Enhanced text buttons */
    .form-sp .btn.text-muted,
    .form-sp .btn.text-right {
        color: #6c757d !important;
        font-weight: 500 !important;
        border-radius: 8px !important;
        padding: 8px 16px !important;
        background: transparent !important;
        border: none !important;
    }
    
    .form-sp .btn.text-muted:hover,
    .form-sp .btn.text-right:hover {
        color: #667eea !important;
        background: rgba(102, 126, 234, 0.1) !important;
    }
    
    /* Alert styling */
    .form-sp .alert {
        border-radius: 12px !important;
        border: none !important;
        background: rgba(255, 193, 7, 0.1) !important;
        color: #856404 !important;
        border-left: 4px solid #ffc107 !important;
        margin-bottom: 1rem !important;
    }
    
    /* HR styling */
    .form-sp hr {
        border: none !important;
        height: 1px !important;
        background: linear-gradient(90deg, transparent, #e8ecf4, transparent) !important;
        margin: 1.5rem 0 !important;
    }
    
    /* Icon styling */
    .form-sp iconpark-icon {
        margin-right: 8px !important;
        font-size: 18px !important;
    }
    
    /* Modal enhancements */
    .modal-content {
        border-radius: 20px !important;
        border: none !important;
        background: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(20px) !important;
    }
    
    .modal-header {
        border-bottom: 1px solid rgba(0, 0, 0, 0.05) !important;
        border-radius: 20px 20px 0 0 !important;
        padding: 1.5rem 2rem !important;
    }
    
    .modal-body {
        padding: 2rem !important;
    }
    
    .modal-footer {
        border-top: 1px solid rgba(0, 0, 0, 0.05) !important;
        border-radius: 0 0 20px 20px !important;
        padding: 1.5rem 2rem !important;
    }
    
    /* Email domain list specific styling */
    .modal-body .area_global ul,
    .modal-body .area_cn ul,
    .modal-body ul.email-domain-list {
        display: grid !important;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)) !important;
        gap: 8px !important;
        list-style: none !important;
        padding: 0 !important;
        margin: 0 !important;
    }
    
    .modal-body .area_global li,
    .modal-body .area_cn li,
    .modal-body ul.email-domain-list li {
        padding: 8px 12px !important;
        background: #f8f9fb !important;
        border-radius: 8px !important;
        font-family: monospace !important;
        font-size: 14px !important;
        text-align: center !important;
        border: none !important;
        box-shadow: none !important;
    }
    
    .modal-body .area_global li::before,
    .modal-body .area_cn li::before,
    .modal-body ul.email-domain-list li::before {
        display: none !important;
    }
    
    .modal-body .area_global li:hover,
    .modal-body .area_cn li:hover,
    .modal-body ul.email-domain-list li:hover {
        background: #e8ecf4 !important;
        transform: none !important;
    }
    
    /* Area specific styling */
    .form-sp .area_global, 
    .form-sp .area_cn {
        padding: 0 !important;
    }
    
    /* Enhanced spacing */
    .form-sp .mt-2 {
        margin-top: 1rem !important;
    }
    
    .form-sp .mt-4 {
        margin-top: 1.5rem !important;
    }
    
    .form-sp .mb-1 {
        margin-bottom: 0.5rem !important;
    }
    
    .form-sp .mb-6 {
        margin-bottom: 2rem !important;
    }
    
    /* Fix text alignment */
    .form-sp .text-center {
        text-align: center !important;
    }
    
    .form-sp .text-right {
        text-align: right !important;
    }
}

/* Dark mode overrides for modern auth */
@media (prefers-color-scheme: dark) and (min-width: 768px) {
    /* Dark mode card styling */
    .form-sp .card {
        background: rgba(31, 41, 55, 0.95) !important;
        box-shadow: 
            0 20px 40px rgba(0, 0, 0, 0.5),
            0 0 0 1px rgba(255, 255, 255, 0.1) !important;
    }

    /* Dark mode form controls */
    .form-sp .form-control {
        background: rgba(255, 255, 255, 0.1) !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
    }

    .form-sp .form-control:focus {
        background: rgba(255, 255, 255, 0.15) !important;
        border-color: rgba(99, 102, 241, 0.5) !important;
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2) !important;
        color: #ffffff !important;
    }

    .form-sp .form-control::placeholder {
        color: rgba(255, 255, 255, 0.6) !important;
    }

    /* Dark mode modal content */
    .modal-content {
        background: rgba(31, 41, 55, 0.95) !important;
    }

    .modal-header {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    }

    .modal-footer {
        border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
    }

    .modal-body li {
        background: rgba(255, 255, 255, 0.1) !important;
        color: #ffffff !important;
    }

    .modal-body li:hover {
        background: rgba(255, 255, 255, 0.2) !important;
    }

    /* Fix specific user modal elements */
    .modal #user_logo_file,
    #userModal #user_logo_file,
    .modal input#user_logo_file,
    #userModal input#user_logo_file,
    .form-sp #user_logo_file,
    .form-sp input#user_logo_file,
    .form-sp .form-control#user_logo_file[type="file"],
    .form-sp input.form-control#user_logo_file[type="file"],
    .form-sp .custom-file-input#user_logo_file {
        background: #2d3748 !important;
        background-color: #2d3748 !important;
        border: 2px solid #4a5568 !important;
        border-color: #4a5568 !important;
        color: #ffffff !important;
        padding: 8px 12px !important;
        border-radius: 8px !important;
        font-size: 14px !important;
        cursor: pointer !important;
        -webkit-text-fill-color: #ffffff !important;
        text-shadow: none !important;
    }

    .modal #user_logo_file:focus,
    #userModal #user_logo_file:focus,
    .modal input#user_logo_file:focus,
    #userModal input#user_logo_file:focus,
    .form-sp #user_logo_file:focus,
    .form-sp input#user_logo_file:focus,
    .form-sp .form-control#user_logo_file:focus {
        background: #2d3748 !important;
        background-color: #2d3748 !important;
        border-color: #718096 !important;
        box-shadow: 0 0 0 3px rgba(113, 128, 150, 0.3) !important;
        color: #ffffff !important;
    }

    /* Auto dark mode file upload button styling */
    .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button,
    .form-sp .form-control#user_logo_file[type="file"]::-webkit-file-upload-button,
    .modal .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button {
        background: #4a5568 !important;
        background-color: #4a5568 !important;
        border: 1px solid #718096 !important;
        border-radius: 6px !important;
        color: #ffffff !important;
        padding: 6px 12px !important;
        margin-right: 8px !important;
        font-size: 14px !important;
        cursor: pointer !important;
        -webkit-appearance: button !important;
        -webkit-text-fill-color: #ffffff !important;
    }

    .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button:hover,
    .form-sp .form-control#user_logo_file[type="file"]::-webkit-file-upload-button:hover,
    .modal .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button:hover {
        background: #718096 !important;
        background-color: #718096 !important;
    }

    /* Auto dark mode Firefox file input button */
    .form-sp input#user_logo_file[type="file"]::file-selector-button,
    .form-sp .form-control#user_logo_file[type="file"]::file-selector-button,
    .modal .form-sp input#user_logo_file[type="file"]::file-selector-button {
        background: #4a5568 !important;
        background-color: #4a5568 !important;
        border: 1px solid #718096 !important;
        border-radius: 6px !important;
        color: #ffffff !important;
        padding: 6px 12px !important;
        margin-right: 8px !important;
        font-size: 14px !important;
        cursor: pointer !important;
    }

    .form-sp input#user_logo_file[type="file"]::file-selector-button:hover,
    .form-sp .form-control#user_logo_file[type="file"]::file-selector-button:hover,
    .modal .form-sp input#user_logo_file[type="file"]::file-selector-button:hover {
        background: #718096 !important;
        background-color: #718096 !important;
    }

    /* Fix the actual visible element - custom-file-label for auto dark mode */
    .custom-file-label,
    .custom-file-label.user_logo_postmsg,
    label.custom-file-label,
    label.custom-file-label.user_logo_postmsg,
    .form-sp .custom-file-label,
    .modal .custom-file-label,
    #userModal .custom-file-label {
        background: #2d3748 !important;
        background-color: #2d3748 !important;
        border: 2px solid #4a5568 !important;
        border-color: #4a5568 !important;
        color: #ffffff !important;
        border-radius: 8px !important;
        padding: 8px 12px !important;
        font-size: 14px !important;
    }

    .custom-file-label:hover,
    .custom-file-label.user_logo_postmsg:hover,
    label.custom-file-label:hover,
    .form-sp .custom-file-label:hover,
    .modal .custom-file-label:hover,
    #userModal .custom-file-label:hover {
        background: #4a5568 !important;
        background-color: #4a5568 !important;
        border-color: #718096 !important;
    }

    .modal #user_review_tos_1,
    .modal #user_review_tos_2,
    #userModal #user_review_tos_1,
    #userModal #user_review_tos_2 {
        background: rgba(255, 255, 255, 0.1) !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
        color: #ffffff !important;
    }

    .modal #user_review_tos_1::placeholder,
    .modal #user_review_tos_2::placeholder,
    #userModal #user_review_tos_1::placeholder,
    #userModal #user_review_tos_2::placeholder {
        color: rgba(255, 255, 255, 0.6) !important;
    }

    /* Fix any white background elements in userModal */
    #userModal .bg-white,
    #userModal .bg-light {
        background-color: rgba(255, 255, 255, 0.1) !important;
    }

    #userModal .text-dark,
    #userModal .text-muted {
        color: #d1d5db !important;
    }
}

/* Manual dark mode overrides */
body.dark-mode .form-sp .card {
    background: rgba(31, 41, 55, 0.95) !important;
    box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(255, 255, 255, 0.1) !important;
}

body.dark-mode .form-sp .form-control {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
    color: #ffffff !important;
}

body.dark-mode .form-sp .form-control:focus {
    background: rgba(255, 255, 255, 0.15) !important;
    border-color: rgba(99, 102, 241, 0.5) !important;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2) !important;
    color: #ffffff !important;
}

body.dark-mode .form-sp .form-control::placeholder {
    color: rgba(255, 255, 255, 0.6) !important;
}

body.dark-mode .modal-content {
    background: rgba(31, 41, 55, 0.95) !important;
}

body.dark-mode .modal-header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
}

body.dark-mode .modal-footer {
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
}

body.dark-mode .modal-body li {
    background: rgba(255, 255, 255, 0.1) !important;
    color: #ffffff !important;
}

body.dark-mode .modal-body li:hover {
    background: rgba(255, 255, 255, 0.2) !important;
}

/* Fix specific user modal elements */
body.dark-mode .modal #user_logo_file,
body.dark-mode #userModal #user_logo_file,
body.dark-mode .modal input#user_logo_file,
body.dark-mode #userModal input#user_logo_file,
body.dark-mode .form-sp #user_logo_file,
body.dark-mode .form-sp input#user_logo_file {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
    color: #ffffff !important;
    border: 2px solid rgba(255, 255, 255, 0.2) !important;
}

body.dark-mode .modal #user_logo_file:focus,
body.dark-mode #userModal #user_logo_file:focus,
body.dark-mode .modal input#user_logo_file:focus,
body.dark-mode #userModal input#user_logo_file:focus,
body.dark-mode .form-sp #user_logo_file:focus,
body.dark-mode .form-sp input#user_logo_file:focus {
    background: rgba(255, 255, 255, 0.15) !important;
    border-color: rgba(99, 102, 241, 0.5) !important;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2) !important;
    color: #ffffff !important;
}

body.dark-mode .modal #user_review_tos_1,
body.dark-mode .modal #user_review_tos_2,
body.dark-mode #userModal #user_review_tos_1,
body.dark-mode #userModal #user_review_tos_2 {
    background: rgba(255, 255, 255, 0.1) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
    color: #ffffff !important;
}

body.dark-mode .modal #user_review_tos_1::placeholder,
body.dark-mode .modal #user_review_tos_2::placeholder,
body.dark-mode #userModal #user_review_tos_1::placeholder,
body.dark-mode #userModal #user_review_tos_2::placeholder {
    color: rgba(255, 255, 255, 0.6) !important;
}

/* Fix any white background elements in userModal */
body.dark-mode #userModal .bg-white,
body.dark-mode #userModal .bg-light {
    background-color: rgba(255, 255, 255, 0.1) !important;
}

body.dark-mode #userModal .text-dark,
body.dark-mode #userModal .text-muted {
    color: #d1d5db !important;
}

/* Ultra-specific file input styling for modern-auth - highest priority */
body.dark-mode .form-sp .form-control#user_logo_file[type="file"],
body.dark-mode .form-sp input.form-control#user_logo_file[type="file"],
body.dark-mode .form-sp .custom-file-input#user_logo_file,
body.dark-mode .modal .form-sp #user_logo_file[type="file"],
body.dark-mode #userModal .form-sp #user_logo_file[type="file"],
body.dark-mode .form-sp input#user_logo_file,
body.dark-mode .form-sp #user_logo_file {
    background: #2d3748 !important;
    background-color: #2d3748 !important;
    border: 2px solid #4a5568 !important;
    border-color: #4a5568 !important;
    color: #ffffff !important;
    padding: 8px 12px !important;
    border-radius: 8px !important;
    font-size: 14px !important;
    cursor: pointer !important;
    -webkit-text-fill-color: #ffffff !important;
    text-shadow: none !important;
}

/* Override the modern-auth form control styles specifically */
body.dark-mode .form-sp .form-control#user_logo_file {
    background: #2d3748 !important;
    background-color: #2d3748 !important;
    border: 2px solid #4a5568 !important;
    border-color: #4a5568 !important;
    color: #ffffff !important;
}

body.dark-mode .form-sp .form-control#user_logo_file:focus {
    background: #2d3748 !important;
    background-color: #2d3748 !important;
    border-color: #718096 !important;
    box-shadow: 0 0 0 3px rgba(113, 128, 150, 0.3) !important;
    color: #ffffff !important;
}

/* File upload button styling for modern-auth */
body.dark-mode .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button,
body.dark-mode .form-sp .form-control#user_logo_file[type="file"]::-webkit-file-upload-button,
body.dark-mode .modal .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button {
    background: #4a5568 !important;
    background-color: #4a5568 !important;
    border: 1px solid #718096 !important;
    border-radius: 6px !important;
    color: #ffffff !important;
    padding: 6px 12px !important;
    margin-right: 8px !important;
    font-size: 14px !important;
    cursor: pointer !important;
    -webkit-appearance: button !important;
    -webkit-text-fill-color: #ffffff !important;
}

body.dark-mode .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button:hover,
body.dark-mode .form-sp .form-control#user_logo_file[type="file"]::-webkit-file-upload-button:hover,
body.dark-mode .modal .form-sp input#user_logo_file[type="file"]::-webkit-file-upload-button:hover {
    background: #718096 !important;
    background-color: #718096 !important;
}

/* Firefox file input button for modern-auth */
body.dark-mode .form-sp input#user_logo_file[type="file"]::file-selector-button,
body.dark-mode .form-sp .form-control#user_logo_file[type="file"]::file-selector-button,
body.dark-mode .modal .form-sp input#user_logo_file[type="file"]::file-selector-button {
    background: #4a5568 !important;
    background-color: #4a5568 !important;
    border: 1px solid #718096 !important;
    border-radius: 6px !important;
    color: #ffffff !important;
    padding: 6px 12px !important;
    margin-right: 8px !important;
    font-size: 14px !important;
    cursor: pointer !important;
}

body.dark-mode .form-sp input#user_logo_file[type="file"]::file-selector-button:hover,
body.dark-mode .form-sp .form-control#user_logo_file[type="file"]::file-selector-button:hover,
body.dark-mode .modal .form-sp input#user_logo_file[type="file"]::file-selector-button:hover {
    background: #718096 !important;
    background-color: #718096 !important;
}

/* Fix the actual visible element - custom-file-label */
body.dark-mode .custom-file-label,
body.dark-mode .custom-file-label.user_logo_postmsg,
body.dark-mode label.custom-file-label,
body.dark-mode label.custom-file-label.user_logo_postmsg,
body.dark-mode .form-sp .custom-file-label,
body.dark-mode .modal .custom-file-label,
body.dark-mode #userModal .custom-file-label {
    background: #2d3748 !important;
    background-color: #2d3748 !important;
    border: 2px solid #4a5568 !important;
    border-color: #4a5568 !important;
    color: #ffffff !important;
    border-radius: 8px !important;
    padding: 8px 12px !important;
    font-size: 14px !important;
}

body.dark-mode .custom-file-label:hover,
body.dark-mode .custom-file-label.user_logo_postmsg:hover,
body.dark-mode label.custom-file-label:hover,
body.dark-mode .form-sp .custom-file-label:hover,
body.dark-mode .modal .custom-file-label:hover,
body.dark-mode #userModal .custom-file-label:hover {
    background: #4a5568 !important;
    background-color: #4a5568 !important;
    border-color: #718096 !important;
}
